const cheerio = require('cheerio');
const should = require('should');

const search = require("../lib/search.js");
const item = require("../lib/item.js");

describe('Item', function() {
    describe('GetUrl', function() {
        it('with id', function(done) {
            var i = new item.Item({id: 905817796});
            i.getUrl().should.equal("http://www.leboncoin.fr/cat/905817796.htm?ca=17_s");
            done()
        });

        it('with id and category', function(done) {
            var i = new item.Item({id: 905817796, category: "annimal"});
            i.getUrl().should.equal("http://www.leboncoin.fr/annimal/905817796.htm?ca=17_s");
            done()
        });

        it('with link', function(done) {
            var i = new item.Item({link: "http://www.leboncoin.fr/annimal/905817796.htm?ca=17_s"});
            i.getUrl().should.equal("http://www.leboncoin.fr/annimal/905817796.htm?ca=17_s");
            done()
        });
    });

    describe('Parsers', function() {
        const html = '<section id="adview" class="grid-2-1"><section class="adview block-white flex-item-first"><header class="adview_header clearfix"><div class="print"><img src="//www2.leboncoin.fr/img/logo-mobile.png"></div><h1 class="no-border">Location Mobil home, gite, chalet, week-end,</h1></header><section class="adview_main"> <meta itemprop="image" content="//img1.leboncoin.fr/images/8f1/8f19d808a3d69b3cc49a006a3e74de9cdf6d6e3e.jpg"> <div class="item_image big popin-open trackable" data-popin-type="image" data-popin-content="//img1.leboncoin.fr/images/8f1/8f19d808a3d69b3cc49a006a3e74de9cdf6d6e3e.jpg" data-info="{&quot;event_name&quot; : &quot;ad_view::zoom_photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><img src="//img1.leboncoin.fr/images/8f1/8f19d808a3d69b3cc49a006a3e74de9cdf6d6e3e.jpg" alt="Location Mobil home, gite, chalet, week-end,"><p class="item_imageCaption">Location Mobil home, gite, chalet, week-end,</p><div class="layout loader hidden"><span class="loader-gif"></span></div><div class="layout loader hidden"><span class="loaderGif"></span></div></div><section class="carousel"><div style="width: 596px;" class="thumbnails" data-alt="Location Mobil home, gite, chalet, week-end,"><ul><li id="thumb_0" class="thumb selected trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img1.leboncoin.fr/thumbs/8f1/8f19d808a3d69b3cc49a006a3e74de9cdf6d6e3e.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li><li id="thumb_1" class="thumb trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img3.leboncoin.fr/thumbs/153/153440a9bf9cb414c943c2deeffe4a915bce444e.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li><li id="thumb_2" class="thumb trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img1.leboncoin.fr/thumbs/fd1/fd1801915899f43ff17e33f479a2e1bbbc1fcb46.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li><li id="thumb_3" class="thumb trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img0.leboncoin.fr/thumbs/bbc/bbc1e941bfc6098608408ba011b0123862d8fcc1.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li><li id="thumb_4" class="thumb trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img6.leboncoin.fr/thumbs/5d6/5d683f49a9b54d7d0cc24b6f343ed2c5e1c74df7.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li><li id="thumb_5" class="thumb trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img3.leboncoin.fr/thumbs/c16/c1652ee6c7a761922e07e01df70c50539947e507.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li><li id="thumb_6" class="thumb trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img5.leboncoin.fr/thumbs/9ad/9ad4d7d9ec2f769eb1fa540ee9ddf8123addc254.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li><li id="thumb_7" class="thumb trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img6.leboncoin.fr/thumbs/b28/b2853fb22e684d3bf937f0ab50d7576f041cb444.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li><li id="thumb_8" class="thumb trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img0.leboncoin.fr/thumbs/1b4/1b4be338b32f195eb6a554f54b71c9eb9fd7188f.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li><li id="thumb_9" class="thumb trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><span class="item_imagePic"><img src="//img0.leboncoin.fr/thumbs/6cd/6cd5a224f0136b17528b5df6252999f1ab25345e.jpg" alt="Location Mobil home, gite, chalet, week-end,"></span></li></ul></div><i class="icon-chevron-right icon-3x small-hidden tiny-hidden trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"></i><i class="icon-chevron-left icon-3x small-hidden tiny-hidden trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::photos&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"></i></section><p class="item_photo">10 photos disponibles</p><script>var images = new Array(), images_thumbs = new Array();images_thumbs[0] = "//img1.leboncoin.fr/thumbs/8f1/8f19d808a3d69b3cc49a006a3e74de9cdf6d6e3e.jpg"; images[0] = "//img1.leboncoin.fr/images/8f1/8f19d808a3d69b3cc49a006a3e74de9cdf6d6e3e.jpg";images_thumbs[1] = "//img3.leboncoin.fr/thumbs/153/153440a9bf9cb414c943c2deeffe4a915bce444e.jpg"; images[1] = "//img3.leboncoin.fr/images/153/153440a9bf9cb414c943c2deeffe4a915bce444e.jpg";images_thumbs[2] = "//img1.leboncoin.fr/thumbs/fd1/fd1801915899f43ff17e33f479a2e1bbbc1fcb46.jpg"; images[2] = "//img1.leboncoin.fr/xxl/fd1/fd1801915899f43ff17e33f479a2e1bbbc1fcb46.jpg"; images_thumbs[3] = "//img0.leboncoin.fr/thumbs/bbc/bbc1e941bfc6098608408ba011b0123862d8fcc1.jpg"; images[3] = "//img0.leboncoin.fr/images/bbc/bbc1e941bfc6098608408ba011b0123862d8fcc1.jpg";images_thumbs[4] = "//img6.leboncoin.fr/thumbs/5d6/5d683f49a9b54d7d0cc24b6f343ed2c5e1c74df7.jpg"; images[4] = "//img6.leboncoin.fr/images/5d6/5d683f49a9b54d7d0cc24b6f343ed2c5e1c74df7.jpg";images_thumbs[5] = "//img3.leboncoin.fr/thumbs/c16/c1652ee6c7a761922e07e01df70c50539947e507.jpg"; images[5] = "//img3.leboncoin.fr/images/c16/c1652ee6c7a761922e07e01df70c50539947e507.jpg";images_thumbs[6] = "//img5.leboncoin.fr/thumbs/9ad/9ad4d7d9ec2f769eb1fa540ee9ddf8123addc254.jpg"; images[6] = "//img5.leboncoin.fr/images/9ad/9ad4d7d9ec2f769eb1fa540ee9ddf8123addc254.jpg";images_thumbs[7] = "//img6.leboncoin.fr/thumbs/b28/b2853fb22e684d3bf937f0ab50d7576f041cb444.jpg"; images[7] = "//img6.leboncoin.fr/xxl/b28/b2853fb22e684d3bf937f0ab50d7576f041cb444.jpg"; images_thumbs[8] = "//img0.leboncoin.fr/thumbs/1b4/1b4be338b32f195eb6a554f54b71c9eb9fd7188f.jpg"; images[8] = "//img0.leboncoin.fr/images/1b4/1b4be338b32f195eb6a554f54b71c9eb9fd7188f.jpg";images_thumbs[9] = "//img0.leboncoin.fr/thumbs/6cd/6cd5a224f0136b17528b5df6252999f1ab25345e.jpg"; images[9] = "//img0.leboncoin.fr/xxl/6cd/6cd5a224f0136b17528b5df6252999f1ab25345e.jpg"; </script><section class="properties lineNegative"> <div class="apn-vp"> <div id="vp1-s" class="teal-apn"></div> <div id="vp1-m" class="teal-apn"></div><!-- --<div id="vp2-m" class="teal-apn"></div>--></div> <p class="line line_pro">Mise en ligne le 28 février à 23:29</p><div class="line line_pro noborder"><p><span class="ispro">Pro Immobilier</span> <a href="//www2.leboncoin.fr/ar?ca=12_s&amp;id=921756076" class="uppercase bold trackable" data-info="{&quot;event_name&quot; : &quot;ad_reply::email::pseudo_annonceur&quot;, &quot;event_type&quot; : &quot;load&quot;, &quot;event_s2&quot; : &quot;4&quot;}">sarl etl</a><span> Numéro SIREN : 397942624</span></p></div> <div class="apn-blt"> <div id="blt1-s" class="teal-apn"></div> <div id="blt1-m" class="teal-apn"></div> <div id="blt1-l" class="teal-apn"></div><!-- --><div id="blt2-l" class="teal-apn"></div> <div id="blt1-xl" class="teal-apn"></div><!-- --><div id="blt2-xl" class="teal-apn"></div> <div class="clear"></div></div> <div class="line"> <h2 class="item_price clearfix" itemprop="price" content="95"> <span class="property">Prix / semaine </span> <meta itemprop="priceCurrency" content="EUR"> <span class="value"> <span itemprop="lowPrice" content="95"> <span class="text">de</span> 95&nbsp;€ </span> <span itemprop="highPrice" content="155"> <span class="text">à</span> 155&nbsp;€ </span> </span> </h2> </div> <div class="line line_city" itemprop="availableAtOrFrom" itemscope="" itemtype="http://schema.org/Place"><h2 class="clearfix"> <span class="property"> <span class="fl">Ville</span> <button class="button-orange-mobile popin-open trackable large-hidden medium-hidden small-hidden" data-popin-type="map" data-popin-template="adviewMap" data-application="adview" data-info="{&quot;event_name&quot; : &quot;ad_view::voir_sur_la_carte&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><i class="icon-map-marker nomargin"></i></button> </span> <span class="value" itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">Renty 62560 </span> <button class="button-orange-mobile popin-open trackable tiny-hidden" data-popin-type="map" data-popin-template="adviewMap" data-application="adview" data-info="{&quot;event_name&quot; : &quot;ad_view::voir_sur_la_carte&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><i class="icon-map-marker nomargin"></i></button> </h2></div> <div class="line"> <h2 class="clearfix"> <span class="property">Capacité</span> <span class="value">4</span> </h2></div> <div class="line"> <h2 class="clearfix"> <span class="property">Référence</span> <span class="value">location</span> </h2></div> <div class="line"> <h2 class="clearfix"> <span class="property">Piscine</span> <span class="value">Oui</span> </h2> </div> <div class="line"> <h2 class="clearfix"> <span class="property">Nb de chambres</span> <span class="value">2</span> </h2> </div> <!-- Skip to 03/2016 from 3/2016 --> <div class="line properties_vacation"> <h2 class="clearfix"> <span class="property">Tarifs et Disponibilités</span> </h2> <div id="availability"> <div id="legends"> <div class="legend available"> <div class="color">&nbsp;</div> <div class="content">Disponible</div> </div> <div class="legend unavailable"> <div class="color">&nbsp;</div> <div class="content">Non disponible</div> </div> </div> <div id="availability-pages"> <div style="width: 664px;" class="page"> <div class="cal"> <div class="title"> mars 2016 <i class="icon-chevron-left hidden"></i> <i class="icon-chevron-right"></i> </div> <div class="content"> <div class="day softgrey"> sa </div> <div class="day softgrey"> di </div> <div class="day softgrey"> lu </div> <div class="day softgrey"> ma </div> <div class="day softgrey"> me </div> <div class="day softgrey"> je </div> <div class="day softgrey"> ve </div> <div class="day rent mardi"> 1 </div> <div class="day rent"> 2 </div> <div class="day rent"> 3 </div> <div class="day available"> 4 </div> <div class="day available"> 5 </div> <div class="day available"> 6 </div> <div class="day available"> 7 </div> <div class="day available"> 8 </div> <div class="day available"> 9 </div> <div class="day available"> 10 </div> <div class="day available"> 11 </div> <div class="day available"> 12 </div> <div class="day available"> 13 </div> <div class="day available"> 14 </div> <div class="day available"> 15 </div> <div class="day available"> 16 </div> <div class="day available"> 17 </div> <div class="day available"> 18 </div> <div class="day available"> 19 </div> <div class="day available"> 20 </div> <div class="day available"> 21 </div> <div class="day available"> 22 </div> <div class="day available"> 23 </div> <div class="day available"> 24 </div> <div class="day available"> 25 </div> <div class="day available"> 26 </div> <div class="day available"> 27 </div> <div class="day available"> 28 </div> <div class="day rent"> 29 </div> <div class="day rent"> 30 </div> <div class="day rent"> 31 </div> </div> </div> <div class="list-date"> <div class="title"> Prix / semaine </div> <p>Du 4/3/2016 au 24/3/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;190 €</p> <p>Du 25/3/2016 au 28/3/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;150 €</p> </div> </div> <div style="width: 664px;" class="page"> <div class="cal"> <div class="title"> avril 2016 <i class="icon-chevron-left hidden"></i> <i class="icon-chevron-right"></i> </div> <div class="content"> <div class="day softgrey"> sa </div> <div class="day softgrey"> di </div> <div class="day softgrey"> lu </div> <div class="day softgrey"> ma </div> <div class="day softgrey"> me </div> <div class="day softgrey"> je </div> <div class="day softgrey"> ve </div> <div class="day rent vendredi"> 1 </div> <div class="day available"> 2 </div> <div class="day available"> 3 </div> <div class="day available"> 4 </div> <div class="day available"> 5 </div> <div class="day available"> 6 </div> <div class="day available"> 7 </div> <div class="day available"> 8 </div> <div class="day available"> 9 </div> <div class="day available"> 10 </div> <div class="day available"> 11 </div> <div class="day available"> 12 </div> <div class="day available"> 13 </div> <div class="day available"> 14 </div> <div class="day available"> 15 </div> <div class="day available"> 16 </div> <div class="day available"> 17 </div> <div class="day available"> 18 </div> <div class="day available"> 19 </div> <div class="day available"> 20 </div> <div class="day available"> 21 </div> <div class="day available"> 22 </div> <div class="day available"> 23 </div> <div class="day available"> 24 </div> <div class="day available"> 25 </div> <div class="day available"> 26 </div> <div class="day available"> 27 </div> <div class="day available"> 28 </div> <div class="day available"> 29 </div> <div class="day available"> 30 </div> </div> </div> <div class="list-date"> <div class="title"> Prix / semaine </div> <p>Du 2/4/2016 au 9/4/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;220 €</p> <p>Du 9/4/2016 au 16/4/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;220 €</p> <p>Du 16/4/2016 au 1/7/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;220 €</p> </div> </div> <div style="width: 664px;" class="page"> <div class="cal"> <div class="title"> mai 2016 <i class="icon-chevron-left hidden"></i> <i class="icon-chevron-right"></i> </div> <div class="content"> <div class="day softgrey"> sa </div> <div class="day softgrey"> di </div> <div class="day softgrey"> lu </div> <div class="day softgrey"> ma </div> <div class="day softgrey"> me </div> <div class="day softgrey"> je </div> <div class="day softgrey"> ve </div> <div class="day available dimanche"> 1 </div> <div class="day available"> 2 </div> <div class="day available"> 3 </div> <div class="day available"> 4 </div> <div class="day available"> 5 </div> <div class="day available"> 6 </div> <div class="day available"> 7 </div> <div class="day available"> 8 </div> <div class="day available"> 9 </div> <div class="day available"> 10 </div> <div class="day available"> 11 </div> <div class="day available"> 12 </div> <div class="day available"> 13 </div> <div class="day available"> 14 </div> <div class="day available"> 15 </div> <div class="day available"> 16 </div> <div class="day available"> 17 </div> <div class="day available"> 18 </div> <div class="day available"> 19 </div> <div class="day available"> 20 </div> <div class="day available"> 21 </div> <div class="day available"> 22 </div> <div class="day available"> 23 </div> <div class="day available"> 24 </div> <div class="day available"> 25 </div> <div class="day available"> 26 </div> <div class="day available"> 27 </div> <div class="day available"> 28 </div> <div class="day available"> 29 </div> <div class="day available"> 30 </div> <div class="day available"> 31 </div> </div> </div> <div class="list-date"> <div class="title"> Prix / semaine </div> <p>Du 16/4/2016 au 1/7/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;220 €</p> </div> </div> <div style="width: 664px;" class="page"> <div class="cal"> <div class="title"> juin 2016 <i class="icon-chevron-left hidden"></i> <i class="icon-chevron-right"></i> </div> <div class="content"> <div class="day softgrey"> sa </div> <div class="day softgrey"> di </div> <div class="day softgrey"> lu </div> <div class="day softgrey"> ma </div> <div class="day softgrey"> me </div> <div class="day softgrey"> je </div> <div class="day softgrey"> ve </div> <div class="day available mercredi"> 1 </div> <div class="day available"> 2 </div> <div class="day available"> 3 </div> <div class="day available"> 4 </div> <div class="day available"> 5 </div> <div class="day available"> 6 </div> <div class="day available"> 7 </div> <div class="day available"> 8 </div> <div class="day available"> 9 </div> <div class="day available"> 10 </div> <div class="day available"> 11 </div> <div class="day available"> 12 </div> <div class="day available"> 13 </div> <div class="day available"> 14 </div> <div class="day available"> 15 </div> <div class="day available"> 16 </div> <div class="day available"> 17 </div> <div class="day available"> 18 </div> <div class="day available"> 19 </div> <div class="day available"> 20 </div> <div class="day available"> 21 </div> <div class="day available"> 22 </div> <div class="day available"> 23 </div> <div class="day available"> 24 </div> <div class="day available"> 25 </div> <div class="day available"> 26 </div> <div class="day available"> 27 </div> <div class="day available"> 28 </div> <div class="day available"> 29 </div> <div class="day available"> 30 </div> </div> </div> <div class="list-date"> <div class="title"> Prix / semaine </div> <p>Du 16/4/2016 au 1/7/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;220 €</p> </div> </div> <div style="width: 664px;" class="page"> <div class="cal"> <div class="title"> juillet 2016 <i class="icon-chevron-left hidden"></i> <i class="icon-chevron-right"></i> </div> <div class="content"> <div class="day softgrey"> sa </div> <div class="day softgrey"> di </div> <div class="day softgrey"> lu </div> <div class="day softgrey"> ma </div> <div class="day softgrey"> me </div> <div class="day softgrey"> je </div> <div class="day softgrey"> ve </div> <div class="day available vendredi"> 1 </div> <div class="day available"> 2 </div> <div class="day available"> 3 </div> <div class="day available"> 4 </div> <div class="day available"> 5 </div> <div class="day available"> 6 </div> <div class="day available"> 7 </div> <div class="day available"> 8 </div> <div class="day available"> 9 </div> <div class="day available"> 10 </div> <div class="day available"> 11 </div> <div class="day available"> 12 </div> <div class="day available"> 13 </div> <div class="day available"> 14 </div> <div class="day available"> 15 </div> <div class="day available"> 16 </div> <div class="day available"> 17 </div> <div class="day available"> 18 </div> <div class="day available"> 19 </div> <div class="day available"> 20 </div> <div class="day available"> 21 </div> <div class="day available"> 22 </div> <div class="day available"> 23 </div> <div class="day available"> 24 </div> <div class="day available"> 25 </div> <div class="day available"> 26 </div> <div class="day available"> 27 </div> <div class="day available"> 28 </div> <div class="day available"> 29 </div> <div class="day available"> 30 </div> <div class="day available"> 31 </div> </div> </div> <div class="list-date"> <div class="title"> Prix / semaine </div> <p>Du 16/4/2016 au 1/7/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;220 €</p> <p>Du 1/7/2016 au 8/7/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;390 €</p> <p>Du 8/7/2016 au 15/7/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;480 €</p> <p>Du 15/7/2016 au 22/7/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;480 €</p> <p>Du 22/7/2016 au 29/7/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;480 €</p> <p>Du 29/7/2016 au 5/8/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;540 €</p> </div> </div> <div style="width: 664px;" class="page"> <div class="cal"> <div class="title"> août 2016 <i class="icon-chevron-left hidden"></i> <i class="icon-chevron-right"></i> </div> <div class="content"> <div class="day softgrey"> sa </div> <div class="day softgrey"> di </div> <div class="day softgrey"> lu </div> <div class="day softgrey"> ma </div> <div class="day softgrey"> me </div> <div class="day softgrey"> je </div> <div class="day softgrey"> ve </div> <div class="day available lundi"> 1 </div> <div class="day available"> 2 </div> <div class="day available"> 3 </div> <div class="day available"> 4 </div> <div class="day available"> 5 </div> <div class="day available"> 6 </div> <div class="day available"> 7 </div> <div class="day available"> 8 </div> <div class="day available"> 9 </div> <div class="day available"> 10 </div> <div class="day available"> 11 </div> <div class="day available"> 12 </div> <div class="day available"> 13 </div> <div class="day available"> 14 </div> <div class="day available"> 15 </div> <div class="day available"> 16 </div> <div class="day available"> 17 </div> <div class="day available"> 18 </div> <div class="day available"> 19 </div> <div class="day available"> 20 </div> <div class="day available"> 21 </div> <div class="day available"> 22 </div> <div class="day available"> 23 </div> <div class="day available"> 24 </div> <div class="day available"> 25 </div> <div class="day available"> 26 </div> <div class="day available"> 27 </div> <div class="day available"> 28 </div> <div class="day available"> 29 </div> <div class="day available"> 30 </div> <div class="day available"> 31 </div> </div> </div> <div class="list-date"> <div class="title"> Prix / semaine </div> <p>Du 29/7/2016 au 5/8/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;540 €</p> <p>Du 5/8/2016 au 12/8/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;540 €</p> <p>Du 12/8/2016 au 19/8/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;540 €</p> <p>Du 19/8/2016 au 26/8/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;390 €</p> <p>Du 26/8/2016 au 2/9/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;230 €</p> </div> </div> <div style="width: 664px;" class="page"> <div class="cal"> <div class="title"> septembre 2016 <i class="icon-chevron-left hidden"></i> <i class="icon-chevron-right"></i> </div> <div class="content"> <div class="day softgrey"> sa </div> <div class="day softgrey"> di </div> <div class="day softgrey"> lu </div> <div class="day softgrey"> ma </div> <div class="day softgrey"> me </div> <div class="day softgrey"> je </div> <div class="day softgrey"> ve </div> <div class="day available jeudi"> 1 </div> <div class="day available"> 2 </div> <div class="day available"> 3 </div> <div class="day available"> 4 </div> <div class="day available"> 5 </div> <div class="day available"> 6 </div> <div class="day available"> 7 </div> <div class="day available"> 8 </div> <div class="day available"> 9 </div> <div class="day available"> 10 </div> <div class="day available"> 11 </div> <div class="day available"> 12 </div> <div class="day available"> 13 </div> <div class="day available"> 14 </div> <div class="day available"> 15 </div> <div class="day available"> 16 </div> <div class="day available"> 17 </div> <div class="day available"> 18 </div> <div class="day available"> 19 </div> <div class="day available"> 20 </div> <div class="day available"> 21 </div> <div class="day available"> 22 </div> <div class="day available"> 23 </div> <div class="day available"> 24 </div> <div class="day available"> 25 </div> <div class="day available"> 26 </div> <div class="day available"> 27 </div> <div class="day available"> 28 </div> <div class="day available"> 29 </div> <div class="day available"> 30 </div> </div> </div> <div class="list-date"> <div class="title"> Prix / semaine </div> <p>Du 26/8/2016 au 2/9/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;230 €</p> <p>Du 2/9/2016 au 30/11/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;190 €</p> </div> </div> <div style="width: 664px;" class="page"> <div class="cal"> <div class="title"> octobre 2016 <i class="icon-chevron-left hidden"></i> <i class="icon-chevron-right"></i> </div> <div class="content"> <div class="day softgrey"> sa </div> <div class="day softgrey"> di </div> <div class="day softgrey"> lu </div> <div class="day softgrey"> ma </div> <div class="day softgrey"> me </div> <div class="day softgrey"> je </div> <div class="day softgrey"> ve </div> <div class="day available samedi"> 1 </div> <div class="day available"> 2 </div> <div class="day available"> 3 </div> <div class="day available"> 4 </div> <div class="day available"> 5 </div> <div class="day available"> 6 </div> <div class="day available"> 7 </div> <div class="day available"> 8 </div> <div class="day available"> 9 </div> <div class="day available"> 10 </div> <div class="day available"> 11 </div> <div class="day available"> 12 </div> <div class="day available"> 13 </div> <div class="day available"> 14 </div> <div class="day available"> 15 </div> <div class="day available"> 16 </div> <div class="day available"> 17 </div> <div class="day available"> 18 </div> <div class="day available"> 19 </div> <div class="day available"> 20 </div> <div class="day available"> 21 </div> <div class="day available"> 22 </div> <div class="day available"> 23 </div> <div class="day available"> 24 </div> <div class="day available"> 25 </div> <div class="day available"> 26 </div> <div class="day available"> 27 </div> <div class="day available"> 28 </div> <div class="day available"> 29 </div> <div class="day available"> 30 </div> <div class="day available"> 31 </div> </div> </div> <div class="list-date"> <div class="title"> Prix / semaine </div> <p>Du 2/9/2016 au 30/11/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;190 €</p> </div> </div> <div style="width: 664px;" class="page"> <div class="cal"> <div class="title"> novembre 2016 <i class="icon-chevron-left hidden"></i> <i class="icon-chevron-right"></i> </div> <div class="content"> <div class="day softgrey"> sa </div> <div class="day softgrey"> di </div> <div class="day softgrey"> lu </div> <div class="day softgrey"> ma </div> <div class="day softgrey"> me </div> <div class="day softgrey"> je </div> <div class="day softgrey"> ve </div> <div class="day available mardi"> 1 </div> <div class="day available"> 2 </div> <div class="day available"> 3 </div> <div class="day available"> 4 </div> <div class="day available"> 5 </div> <div class="day available"> 6 </div> <div class="day available"> 7 </div> <div class="day available"> 8 </div> <div class="day available"> 9 </div> <div class="day available"> 10 </div> <div class="day available"> 11 </div> <div class="day available"> 12 </div> <div class="day available"> 13 </div> <div class="day available"> 14 </div> <div class="day available"> 15 </div> <div class="day available"> 16 </div> <div class="day available"> 17 </div> <div class="day available"> 18 </div> <div class="day available"> 19 </div> <div class="day available"> 20 </div> <div class="day available"> 21 </div> <div class="day available"> 22 </div> <div class="day available"> 23 </div> <div class="day available"> 24 </div> <div class="day available"> 25 </div> <div class="day available"> 26 </div> <div class="day available"> 27 </div> <div class="day available"> 28 </div> <div class="day available"> 29 </div> <div class="day available"> 30 </div> </div> </div> <div class="list-date"> <div class="title"> Prix / semaine </div> <p>Du 2/9/2016 au 30/11/2016&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;190 €</p> </div> </div> </div> </div> </div> <div class="line properties_description"><p class="property semibold">Description :</p><p id="description" class="value tiny-hidden small-hidden" itemprop="description">Bonjour,<br><br>Semaine :<br>Voici la tarification de vos séjours, en location à la semaine, à partir de 4 personnes, nous avons différentes structures, mobil home, chalet, gite, etc <br><br>week-end :<br>Le tarif est du vendredi au dimanche à partir de 115 EUR pour 4 et 125 EUR pour 6 personnes. Voir notre site pour les différents tarifs, suivant les structures ou nous appeler.<br><br>Week-end Paques, Ascension, Pentecote, vous pouvez regarder les tarifs ci dessus, attention c\'est suivant également suivant les structures. <br><br>Taxe de séjour, elle est bien comprise dans nos tarif, <br><br>La location ouvre l\'accès gratuit aux : A partir de mi-avril à fin octobre les Piscines couvertes et découvertes et chauffées, (si le temps le permet avec son balnéo), et à partir de Paques vous avez accés aux différents terrains, tennis , mini-golf, bicross, foot, pétanque, multisports, jeux extérieurs, trampoline, ping-pong, pêche au blanc, promenade en poney, gym, aquagym, différentes soirées dansantes, spectacles, diverses animations, animation bateau pour les petits, à la réception conseils touristiques et etc ... WIFI gratuite en terrasse et au bar. <br>On peut vous prêter : des livres à la bibliothèque, des jeux de société, les clubs pour le mini golf, des jeux de boules pour la pétanque, les raquettes de ping-pong ou de tennis, moyennement votre carte d\'identité.<br>Sur place vous avez également la possibilité de faire des randonnées pédestres (voir plan à l\'accueil)<br>Payant : Karting (2 EUR pour ½ heure), loto , billard , différents concours (pétanque, belote , pêche à la truite, etc....), machine à laver le linge, sèche linge(4EUR le jeton), la friterie, l\'accès au jacuzzi, sauna et la salle de musculation (est payante aux personnes de moins de 25 ans : 40EUR les dix séances), etc.<br><br>Nous avons également un planning d\'animation, n\'hésitez pas à faire la demande. <br> <br>N\'hésitez pas à nous appeler, pour avoir plus de renseignements au 0321952819, et voir notre site : campinglatentation.com<br>Nous sommes à votre disposition pour plus amples renseignements. <br><br>Toute L\'Equipe de La Tentation vous attend en plein coeur de nos animations. A très bientôt.<br><br>Marque, IRM, OHARA, RAPIDHOME, PENBERTON, CRL, SUN ROLLERS, EUROPA, WILLERBY, WATIPI, NAUTILHOME, LOUISIANE, ATLAS, ABI, RIDEAU, studio, appartement, maison, voiture, moto, quad, carpe, sports, velo, hotel, chambre, sud, soleil, sejour, poney, animation, week-end, semaine, logement, piscine, petanque, club, dennlys parc, bois, promenade, nature, plage, sable, camping-car, chasse, gîte, caravane, insolite, spa, foret, bois, vacances</p><p id="description_truncated" class="value medium-hidden large-hidden">Bonjour,<br><br>Semaine :<br>Voici la tarification de vos séjours, en location à la semaine, à partir de 4 personnes, nous avons différentes structures, mobil home, chalet, gite, etc <br><br>week-end :<br>Le tarif est du vendredi au dimanche à partir de 115 EUR pour 4 et 125 EUR pour 6 personnes. Voir notre site pour les différents tarifs, suivant les structures ou nous appeler.<br><br>Week-end Paques, Ascension, Pentecote, vous pouvez regarder les tarifs ci dessus, attention c\'est suivant également suivant les structures. <br><br>Taxe de séjour, elle est bien comprise dans nos tarif, <br><br>La location ouvre l\'accès gratuit aux : A partir de mi-avril à fin octobre les Piscines couvertes et découvertes et chauffées, (si le temps le permet avec son balnéo), et à partir de Paques vous avez accés aux différents terrains, tennis , mini-golf, bicross, foot, pétanque, multisports, jeux extérieurs, trampoline, ping-pong, pêche au blanc, promenade en poney, gym, aquagym, différen... <span class="read_more">Lire plus <i class="icon-chevron-down"></i></span></p></div> <script> var apiKey = "54bb0281238b45a03f0ee695f73e704f"; </script></section></section><footer class="adview_footer mts"><div class="grid-4 sharer clearfix"><div><span class="flat-horizontal saveAd link-like trackable" data-url="//www.leboncoin.fr/aw?ca=12_s&amp;selected=backup" data-savead-id="921756076" data-savead-domain=".leboncoin.fr" data-savead-url="//www.leboncoin.fr/aw?ca=12_s" data-savead-type="c" title="Sauvegarder l\'annonce" data-info="{&quot;event_name&quot; : &quot;ad_view::sauvegarder&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><i class="icon-heart-outline"></i>Sauvegarder l\'annonce</span></div><a rel="nofollow" title="Signaler un problème" href="//www2.leboncoin.fr/support/form/0?id=1&amp;ca=12_s&amp;subject=15&amp;ad=921756076" class="flat-horizontal trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::signaler_un_probleme&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;click_type&quot; : &quot;N&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><i class="icon-alert-circle"></i>Signaler un problème</a><div class="flex-item-double"><span class="sharer_title"><i class="icon-share-variant"></i>Partager l\'annonce </span><div class="sharer_social"><button class="share facebook trackable" data-href="http://www.facebook.com/sharer.php?u=https://www.leboncoin.fr/campings/921756076.htm?ca=12_s" data-info="{&quot;event_name&quot; : &quot;ad_view::partage::reseaux_sociaux::facebook&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;event_s2&quot; : &quot;2&quot;, &quot;click_type&quot; : &quot;S&quot;}"><i class="icon-facebook nomargin"></i></button><button class="share twitter trackable" data-href="https://twitter.com/share" data-text="Location Mobil home, gite, chalet, week-end, Campings Pas-de-Calais" data-url="https://www.leboncoin.fr/vi/921756076.htm" data-hashtag="leboncoin" data-info="{&quot;event_name&quot; : &quot;ad_view::partage::reseaux_sociaux::twitter&quot;, &quot;event_type&quot; : &quot;click&quot;, &quot;event_s2&quot; : &quot;2&quot;, &quot;click_type&quot; : &quot;S&quot;}"><i class="icon-twitter nomargin"></i></button><button rel="nofollow" class="share mail trackable" title="Envoyer l\'annonce par mail" data-info="{&quot;event_name&quot; : &quot;ad_view::partage::email_ami::formulaire&quot;, &quot;event_type&quot; : &quot;load&quot;, &quot;event_s2&quot; : &quot;2&quot;}"><i class="icon-email nomargin"></i></button></div></div></div><div class="adwatch_saved" id="ad_saved" style="display: none"><div class="ad_arrow"></div><span id="ad_saved_msg"></span></div><aside id="sendMail" class="sendMail"><p class="sendMail_title">Envoyer l\'annonce par mail</p><form action="/st" method="post"><input name="ca" value="12_s" type="hidden"><input name="id" value="921756076" type="hidden"><div class="line"><label for="tip_sender" class="label">Votre adresse mail : </label><div class="field-wrapper"><input name="tip_sender" size="30" value="" maxlength="60" id="tip_sender" class="input full" type="text"></div></div><div class="line"><label for="tip_email" class="label">L\'adresse mail de votre ami(e) : </label><div class="field-wrapper"><input name="tip_email" size="30" value="" maxlength="60" id="tip_email" class="input full" type="text"></div></div><input value="Envoyer" class="button-blue" data-info="{&quot;event_name&quot; : &quot;ad_view::partage::email_ami::confirmation&quot;, &quot;event_type&quot; : &quot;load&quot;, &quot;event_s2&quot; : &quot;2&quot;}" type="submit"></form><div class="information"> <p class="information_title">Information : </p> <p class="information_text"><a href="//www.leboncoin.fr/popup_collecte_donnees_conseiller.htm" onclick="return cnilPopup(this, 700, 300);">- Le responsable de traitement, les destinataires et la finalité de la collecte des données.</a><br> <a href="//www.leboncoin.fr/popup_droits_opposition.htm" onclick="return cnilPopup(this, 700, 300);">- Vos droits d\'opposition, d\'accès et de rectification sur vos données collectées.</a></p></div><script type="text/javascript">function cnilPopup(link, width, height) { var left = window.screenX + (screen.width / 2) - (width / 2); var top = (screen.height / 2) - (height / 2); var windowFeatures = "status=no,height=" + height + ",width=" + width + ",resizable=yes,left=" + left + ",top=" + top + ",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no"; u=link.href; t=document.title; window.open(u,\'InfosCNIL\', windowFeatures); return false;}</script></aside></footer></section><aside class="sidebar" role="complementary"><div class="fixedSrolling"><div class="box-grey-light mbs align-center"><p class="title ad_pro">sarl etl</p><div class="container"><button data-href="https://api.leboncoin.fr" data-listid="921756076" data-salesmen="1" data-textenabled="1" class="button-orange large phoneNumber trackable" data-info="{&quot;event_name&quot; : &quot;ad_reply::telephone::voir_le_numero&quot;, &quot;event_type&quot; : &quot;load&quot;, &quot;event_s2&quot; : &quot;4&quot;}"><i class="icon-phone icon-2x"></i>Voir le numéro</button><a rel="nofollow" href="//www2.leboncoin.fr/ar?ca=12_s&amp;id=921756076" class="button-blue large trackable" data-info="{&quot;event_name&quot; : &quot;ad_reply::email::envoyer_email&quot;, &quot;event_type&quot; : &quot;load&quot;, &quot;event_s2&quot; : &quot;4&quot;}"><i class="icon-email icon-2x"></i>Envoyer un email</a></div></div><div class="box-grey-light mbm align-center"><p class="title">Gérer votre annonce</p><div class="container"><div class="grid-2"><button class="flat-vertical link-like popin-open trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::gerer_annonce::mettre_en_avant&quot;, &quot;event_type&quot; : &quot;load&quot;, &quot;event_s2&quot; : &quot;2&quot;}" data-popin-type="general" data-popin-template="connexion"><i class="icon-star icon-2x"></i>Mettre en avant</button><button class="flat-vertical link-like popin-open trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::gerer_annonce::remonter_en_tete_de_liste&quot;, &quot;event_type&quot; : &quot;load&quot;, &quot;event_s2&quot; : &quot;2&quot;}" data-popin-type="general" data-popin-template="connexion"><i class="icon-sort-ascending icon-2x"></i>Remonter en tête de liste</button> <button class="flat-vertical link-like mts popin-open trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::gerer_annonce::modifier&quot;, &quot;event_type&quot; : &quot;load&quot;, &quot;event_s2&quot; : &quot;2&quot;}" data-popin-type="general" data-popin-template="connexion"><i class="icon-pencil icon-2x"></i>Modifier l\'annonce</button><button class="flat-vertical link-like mts popin-open trackable" data-info="{&quot;event_name&quot; : &quot;ad_view::gerer_annonce::supprimer&quot;, &quot;event_type&quot; : &quot;load&quot;, &quot;event_s2&quot; : &quot;2&quot;}" data-popin-type="general" data-popin-template="connexion"><i class="icon-delete icon-2x"></i>Supprimer l\'annonce</button></div></div></div> <div class="apn-vp"> <div id="vp1-l" class="teal-apn"></div> <div id="vp2-l" class="teal-apn"></div> <div id="vp3-l" class="teal-apn"></div> <div id="vp4-l" class="teal-apn"></div> <div id="vp1-xl" class="teal-apn"></div> <div id="vp2-xl" class="teal-apn"></div></div> <div class="apn-pv"> <div id="pv2-l" class="teal-apn"></div> <div id="pv-xl" class="teal-apn"></div></div> <script>var apiKey = "54bb0281238b45a03f0ee695f73e704f"; var lat = "50.5803 "; var lng = "2.07391 "; var source = $.trim("city "); var zipcode = $.trim("62560 "); var adreplyLink = "//www2.leboncoin.fr/ar?ca=12_s&id=921756076"; var city = $.trim("Renty "); var category = $.trim("68 "); // If IE7 and polygon view, hide carto link if ( $(\'body\').hasClass(\'ua_IE7\') && (source == "city" || source == "zipcode")) { $(".carto-link").hide(); }</script></div></aside></section>';
        const $ = cheerio.load(html);
        it('parse title', function(done) {
            var title = item.parseTitle($);
            title.should.equal('Location Mobil home, gite, chalet, week-end,');
            done();
        });

        it('parse Seller', function(done) {
            var seller = item.parseSeller($);
            seller.should.equal('sarl etl');
            done();
        });

        it('parse Table data', function(done) {
            var data = item.parseTableData($);

            data.zip.should.be.exactly(62560);
            data.city.should.equal('Renty');
            done();
        });

        it('parse images', function(done) {
            var images = item.parseImages($);

            images.should.have.length(10);
            images[0].should.equal('//img1.leboncoin.fr/images/8f1/8f19d808a3d69b3cc49a006a3e74de9cdf6d6e3e.jpg');
            done();
        });
    });

    describe('getDetails', function() {
        it('Run without parameters', function(done) {
            new search.Search().run().then(function (data) {
                data.results[0].getDetails().then(function (data) {
                    data.should.have.property('images');
                    data.should.have.property('description');
                    data.should.have.property('title');
                    data.should.have.property('id');
                    done()
                }, done)
            }, function (err) {
                done(err);
            });
        });
    });

    describe('GetPhoneNumber', function() {
        it('parsePhoneNumberImage 1', function(done) {
            item.parsePhoneNumberImage('./test/assets/phone1.gif').then(function (phoneNumber) {
                phoneNumber.should.equal("0609064893");
                done();
            }, done);
        });

        it('parsePhoneNumberImage 2', function(done) {
            item.parsePhoneNumberImage('./test/assets/phone2.gif').then(function (phoneNumber) {
                phoneNumber.should.equal("0672341635");
                done();
            }, done);
        });

        it('parsePhoneNumberImage 3', function(done) {
            item.parsePhoneNumberImage('./test/assets/phone3.gif').then(function (phoneNumber) {
                phoneNumber.should.equal("0611404567");
                done();
            }, done);
        });

    });
});